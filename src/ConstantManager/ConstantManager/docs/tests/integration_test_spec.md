# 定数管理システム 結合テスト仕様書

**版番:** 1.1  
**作成日:** 2026年1月21日  
**最終更新:** 2026年1月21日（v1.1: テストデータ定義章追加）  
**対象システム:** 車載ソフトウェア定数管理ツール

---

## 目次

- [1. 概要](#1-概要)
- [2. 結合テスト方針と網羅性](#2-結合テスト方針と網羅性)
- [3. テスト対象](#3-テスト対象)
- [4. UI操作フロー テスト](#4-ui操作フロー-テスト)
- [5. グリッド表示・UI制御テスト](#5-グリッド表示ui制御テスト)
- [6. ダイアログテスト](#6-ダイアログテスト)
- [7. エラーハンドリング テスト](#7-エラーハンドリング-テスト)
- [8. シナリオテスト（ユースケース）](#8-シナリオテストユースケース)
- [9. パフォーマンステスト](#9-パフォーマンステスト)
- [10. テストデータ定義](#10-テストデータ定義)
- [11. 改版履歴](#11-改版履歴)

---

## 1. 概要

本仕様書は、定数管理システムの**結合テスト**（Integration Test）の要件を定義します。以下の観点からアプリケーション全体の動作を検証します。

- **UI操作フロー**: メニュー操作、ダイアログ表示、画面遷移
- **表示確認**: グリッド表示、背景色ハイライト、ステータスバー更新
- **エラーハンドリング**: 不正入力、ファイル操作エラー
- **シナリオテスト**: 実際のユースケースに基づいた一連の操作

各テストシナリオは、**テストID、テスト名、前提条件、操作手順、期待される動作**の形式で記載します。

---

## 2. 結合テスト方針と網羅性

### 2.1 結合テスト方針

定数管理システムの結合テストは、以下のポリシーに基づいて実施されます。

#### 2.1.1 業務フロー中心のテスト設計

**テスト対象**: 実際の業務フロー（ユースケース）に基づいたシナリオ検証

定数管理システムの利用者が実際に行う操作シーケンスを重視し、以下の観点から検証します：

- **メイン業務フロー**
  - CSV ファイルの読み込み（新規 / マージ / 置換）
  - 定数の新規追加・編集・削除
  - 修正データの保存・エクスポート
  - アプリケーション終了時の確認

- **エンドツーエンドの画面連動**
  - メニュー操作 → ダイアログ表示 → グリッド更新
  - チェックボックス選択 → 背景色リアルタイム反映 → 削除実行
  - ファイル操作 → ステータスバー即座更新

#### 2.1.2 UI層の網羅的検証

**テスト対象**: 画面遷移、ダイアログ表示、エラーメッセージ表示、UI制御

UI層（MainForm, ConstantEditDialog）の挙動が以下を満たすことを検証します：

- **画面遷移**: メニュー操作、ボタンクリックに対する正しいダイアログ表示
- **入力フィールド**: 新規/編集モードでの制御（編集モード時の PhysicalName グレーアウト）
- **リアルタイム反映**: チェックボックス、ステータスバー、背景色の即座更新
- **エラーメッセージ**: 不正入力、ファイル操作エラーに対する適切なエラー表示

#### 2.1.3 異常系・エッジケースの検証

**テスト対象**: ファイル権限なし、ディスク容量不足、入力値エラーなど

以下の異常系も可能な限り実施し、ユーザー保護と堅牢性を確保します：

- **ファイル操作エラー**: 存在しないファイル、読み取り権限なし、ディスク容量不足
- **入力検証エラー**: 必須項目漏れ、形式不正（定数名のハイフン等）
- **データ一貫性**: 既存データの保全、マージ処理での重複判定

---

### 2.2 テストシナリオ一覧表

以下の表は、定数管理システムの主要機能について、結合テストの実施範囲を記載します。

| 大分類 | 機能/要件 | テスト実施 | 除外理由 | 対応するテストID |
|--------|---------|---------|--------|-----------------|
| **ファイル操作** | CSV読込ダイアログ表示 | ○ | - | IT-FILE-01 |
| **ファイル操作** | 有効なCSVをマージモード読込 | ○ | - | IT-FILE-02 |
| **ファイル操作** | 有効なCSVを置換モード読込 | ○ | - | IT-FILE-03 |
| **ファイル操作** | 不正なヘッダー行のエラー処理 | ○ | - | IT-FILE-04 |
| **ファイル操作** | 存在しないファイルのエラー処理 | ○ | - | IT-FILE-05 |
| **ファイル操作** | 全行をCSVに保存 | ○ | - | IT-FILE-06 |
| **ファイル操作** | チェック選択行のみエクスポート | ○ | - | IT-FILE-07 |
| **ファイル操作** | エクスポート時の0行選択エラー | ○ | - | IT-FILE-08 |
| **ファイル操作** | 読み取り権限なしのエラー処理 | ○ | - | IT-ERROR-01 |
| **ファイル操作** | ディスク容量不足のエラー処理 | ○ | - | IT-ERROR-02 |
| **編集（追加）** | 新規追加ダイアログ表示 | ○ | - | IT-DIALOG-01 |
| **編集（追加）** | 新規定数の正常追加 | ○ | - | IT-DIALOG-02 |
| **編集（追加）** | 必須項目漏れのエラー | ○ | - | IT-DIALOG-03 |
| **編集（追加）** | 定数名形式エラー（ハイフン等） | ○ | - | IT-DIALOG-04 |
| **編集（追加）** | 定数名最大文字数超過 | ○ | - | IT-ERROR-03 |
| **編集（更新）** | 編集ダイアログ表示 | ○ | - | IT-DIALOG-05 |
| **編集（更新）** | 編集モード時の PhysicalName 読み取り専用制御 | ○ | - | IT-DIALOG-06 |
| **編集（更新）** | 既存定数の正常更新 | ○ | - | IT-DIALOG-07 |
| **編集（削除）** | 削除確認ダイアログ表示 | ○ | - | IT-DIALOG-08 |
| **編集（削除）** | 削除確認で「はい」を選択 | ○ | - | IT-DIALOG-09 |
| **編集（削除）** | 削除確認で「いいえ」を選択 | ○ | - | IT-DIALOG-10 |
| **表示（グリッド）** | グリッド列構成確認 | ○ | - | IT-GRID-01 |
| **表示（グリッド）** | グリッドヘッダー日本語表示 | ○ | - | IT-GRID-02 |
| **表示（グリッド）** | グリッドデータ表示（日本語対応） | ○ | - | IT-GRID-03 |
| **表示（UI制御）** | チェック ON → 背景色が黄色に変更 | ○ | - | IT-GRID-04 |
| **表示（UI制御）** | チェック OFF → 背景色が白に戻る | ○ | - | IT-GRID-05 |
| **表示（UI制御）** | 複数行の個別チェック制御 | ○ | - | IT-GRID-06 |
| **表示（UI制御）** | チェック値の即座確定 | ○ | - | IT-GRID-07 |
| **表示（ステータス）** | ステータスバーに総行数表示 | ○ | - | IT-STATUS-01 |
| **表示（ステータス）** | 行追加後のステータス更新 | ○ | - | IT-STATUS-02 |
| **表示（ステータス）** | 行削除後のステータス更新 | ○ | - | IT-STATUS-03 |
| **メニュー操作** | アプリケーション起動時の初期表示 | ○ | - | IT-MAIN-01 |
| **メニュー操作** | [ファイル] メニュー構成確認 | ○ | - | IT-MAIN-02 |
| **メニュー操作** | [編集] メニュー構成確認 | ○ | - | IT-MAIN-03 |
| **シナリオテスト** | UC-001: 定数修正・エクスポート | ○ | - | IT-SCENARIO-01 |
| **シナリオテスト** | UC-002: 新規定数追加・保存 | ○ | - | IT-SCENARIO-02 |
| **シナリオテスト** | UC-004: 複数定数削除・保存 | ○ | - | IT-SCENARIO-03 |
| **終了処理** | 終了確認ダイアログ（保存して終了） | ○ | - | IT-DIALOG-11 |
| **終了処理** | 終了確認ダイアログ（保存せず終了） | ○ | - | IT-DIALOG-12 |
| **終了処理** | 終了確認ダイアログ（キャンセル） | ○ | - | IT-DIALOG-13 |
| **パフォーマンス** | 1000行ファイル読込時間 | ○ | - | IT-PERF-01 |
| **パフォーマンス** | 1000行グリッドスクロール応答性 | ○ | - | IT-PERF-02 |

**カバレッジサマリー**

| 分類 | テストケース数 | 実施状況 |
|-----|-------------|--------|
| ファイル操作 | 10 | ✅ 100% |
| 編集（追加・更新・削除） | 10 | ✅ 100% |
| 表示（グリッド・UI制御・ステータス） | 10 | ✅ 100% |
| メニュー操作 | 3 | ✅ 100% |
| シナリオテスト | 3 | ✅ 100% |
| 終了処理 | 3 | ✅ 100% |
| パフォーマンス | 2 | ✅ 100% |
| **総計** | **41** | **✅ 100%** |

---

## 3. テスト対象

### 3.1 主要コンポーネント

- **MainForm** - メイン画面（グリッド、メニューバー、ステータスバー）
- **ConstantEditDialog** - 定数編集ダイアログ（新規/編集モード）
- **ファイル操作** - CSV読み込み・保存処理
- **UI制御** - チェックボックス、背景色更新、リアルタイム反映

### 3.2 テスト環境

| 項目 | 仕様 |
|------|------|
| **OS** | Windows 10 / 11 |
| **フレームワーク** | .NET 10 |
| **UI** | Windows Forms (WinForms) |
| **テスト方法** | 手動テスト / UIテスト自動化ツール |

---

## 4. UI操作フロー テスト

### 4.1 アプリケーション起動テスト

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-MAIN-01 | 起動時の初期表示確認 | アプリケーションが起動していない状態 | 1. ConstantManager.exe を実行 | ・メインウィンドウが表示される<br/>・タイトル："定数管理ツール"<br/>・グリッドは空（0行）<br/>・ステータスバー："全 0 件"<br/>・メニューバー：[ファイル]、[編集] が表示される | ウィンドウ表示、メニュー表示、ステータス表示 |
| IT-MAIN-02 | メニューバーの構成確認 | アプリケーションが起動している | 1. メニューバーの [ファイル(F)] をクリック | ・[読込(O)]<br/>・[保存(S)]<br/>・[CSVエクスポート(E)]<br/>が表示される | メニュー項目の表示 |
| IT-MAIN-03 | [編集] メニュー構成確認 | アプリケーションが起動している | 1. メニューバーの [編集(E)] をクリック | ・[新規追加(A)]<br/>・[編集(D)]<br/>・[削除(L)]<br/>が表示される | メニュー項目の表示 |

---

### 4.2 ファイル読込フロー テスト

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-FILE-01 | [ファイル] → [読込] ダイアログ表示確認 | アプリケーションが起動している | 1. [ファイル(F)] → [読込(O)] をクリック | ・「ファイルを開く」ダイアログが表示される<br/>・ファイルの種類：「CSV ファイル (*.csv)」<br/>・マージモード、置換モードのオプションが表示される | ダイアログ表示、オプション表示 |
| IT-FILE-02 | 正常なCSVファイルをマージ読込 | [TD-IT-01] 有効なCSVファイル（3行データ）が存在、アプリケーション起動 | 1. [ファイル(F)] → [読込(O)] をクリック<br/>2. [TD-IT-01] CSVファイルを選択<br/>3. 「マージモード」を選択<br/>4. [開く] をクリック | ・ファイルが読み込まれ、グリッドに3行が表示される<br/>・各行の背景色：白色（チェックなし）<br/>・ステータスバー："全 3 件"<br/>・エラーメッセージはなし | グリッド表示、ステータス更新、エラーハンドリング |
| IT-FILE-03 | 正常なCSVファイルを置換読込 | 既存グリッドに5行、[TD-IT-03] 新規CSVファイル（3行）が存在 | 1. 既存ファイルを読込（5行を表示）<br/>2. [ファイル(F)] → [読込(O)] をクリック<br/>3. [TD-IT-03] CSVファイルを選択<br/>4. 「置換モード」を選択<br/>5. [開く] をクリック | ・既存の5行が削除される<br/>・新規の3行が表示される<br/>・ステータスバー："全 3 件"<br/>・確認ダイアログはなし（置換モード） | データ置換、ステータス更新 |
| IT-FILE-04 | 不正なCSV形式（ヘッダーエラー） | [TD-IT-04] ヘッダー行が不正なCSVファイルが存在 | 1. [ファイル(F)] → [読込(O)] をクリック<br/>2. [TD-IT-04] 不正なCSVファイルを選択<br/>3. [開く] をクリック | ・エラーダイアログが表示される<br/>・メッセージ："E003: 不正なCSV形式です（ヘッダー行が不正）"<br/>・グリッドは変更されない | エラーダイアログ、既存データの保全 |
| IT-FILE-05 | 存在しないファイル選択 | ファイルが削除された、またはネットワークパスが無効 | 1. [ファイル(F)] → [読込(O)] をクリック<br/>2. 存在しないパスを指定<br/>3. [開く] をクリック | ・エラーダイアログが表示される<br/>・メッセージ："E001: ファイルが見つかりません"<br/>・グリッドは変更されない | エラーハンドリング |

---

### 4.3 ファイル保存フロー テスト

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-FILE-06 | 全行をCSVファイルに保存 | グリッドに5行のデータが表示されている | 1. [ファイル(F)] → [保存(S)] をクリック | ・「名前を付けて保存」ダイアログが表示される<br/>・デフォルトファイル名：`constants_YYYYMMDD.csv`<br/>・保存ボタンをクリック後、ファイルが保存される<br/>・確認メッセージ表示（必須） | ダイアログ表示、ファイル保存、メッセージ表示 |
| IT-FILE-07 | チェック選択行のみエクスポート | グリッドに5行のデータ、第1行と第3行にチェック | 1. グリッドで第1行のチェックボックスをクリック → チェック ON<br/>2. グリッドで第3行のチェックボックスをクリック → チェック ON<br/>3. [ファイル(F)] → [CSVエクスポート(E)] をクリック<br/>4. ファイル名を入力、[保存] をクリック | ・「名前を付けて保存」ダイアログが表示される<br/>・ファイルが保存される<br/>・保存ファイルに2行のデータのみが含まれる（第1行、第3行）<br/>・ヘッダー行は必ず含まれる | チェックボックス選択、CSVエクスポート、ファイル内容確認 |
| IT-FILE-08 | エクスポート時に0行選択 | グリッドに5行のデータ、チェックなし（全て OFF） | 1. [ファイル(F)] → [CSVエクスポート(E)] をクリック | ・エラーダイアログが表示される<br/>・メッセージ："1行以上選択してください"<br/>・ファイル保存ダイアログは表示されない | 入力検証、エラーメッセージ表示 |

---

## 5. グリッド表示・UI制御テスト

### 5.1 グリッドレイアウト確認

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-GRID-01 | グリッド列構成の確認 | [TD-IT-01] アプリケーション起動、CSVファイル読込済み（1行以上） | 1. [TD-IT-01] でファイル読込完了後、グリッドを視認 | ・第1列：「選択」（チェックボックス）、幅 50px<br/>・第2列：「定数名(物理名)」<br/>・第3列：「日本語名(論理名)」<br/>・第4列：「値」<br/>・第5列：「単位」<br/>・第6列：「説明」<br/>・全ての列ヘッダーが日本語で表示 | 列構成、列ヘッダー、幅設定 |
| IT-GRID-02 | グリッドヘッダーが日本語で表示されること | アプリケーション起動 | 1. [TD-IT-01] でファイル読込後、グリッドヘッダーを視認 | ・各列ヘッダーが日本語表記される<br/>・例：「定数名(物理名)」「日本語名(論理名)」など<br/>・文字化けや英字混在がない | 日本語表示 |
| IT-GRID-03 | グリッド内のデータ表示確認 | [TD-IT-01] CSVファイル（日本語を含む）が読込済み | 1. [TD-IT-01] 読込後、グリッドのセルを視認 | ・各セルにデータが正しく表示される<br/>・日本語が正しく表示される<br/>・改行を含むデータは複数行で表示（またはエリプシス処理） | データ表示、日本語表示、セルの幅自動調整 |

---

### 5.2 チェックボックス操作と背景色制御

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-GRID-04 | チェック ON → 背景色が LightYellow（薄い黄色）に変わる | グリッドに3行のデータ、全てチェック OFF（白背景） | 1. 第1行のチェックボックスをクリック | ・クリック直後に第1行の背景色が薄い黄色に変わる<br/>・他の行の背景色は白のまま<br/>・チェック状態が確定される（リアルタイム反映） | チェックボックス操作、背景色変更、リアルタイム反映 |
| IT-GRID-05 | チェック OFF → 背景色が White（白）に戻る | グリッドで第1行がチェック ON（黄色背景） | 1. 第1行のチェックボックスをクリック（チェック解除） | ・クリック直後に第1行の背景色が白に戻る<br/>・チェック状態が確定される | チェックボックス解除、背景色リセット |
| IT-GRID-06 | 複数行選択時の背景色制御 | グリッドに5行のデータ | 1. 第1行のチェックボックスをクリック（チェック ON）<br/>2. 第3行のチェックボックスをクリック（チェック ON）<br/>3. 第5行のチェックボックスをクリック（チェック ON）<br/>4. 第3行のチェックボックスをクリック（チェック解除） | ・第1行、第5行が黄色<br/>・第3行が白<br/>・第2行、第4行が白<br/>・各行が独立して色制御される | 複数行チェック、背景色独立制御 |
| IT-GRID-07 | チェック状態がボタンクリック前に確定 | グリッドに3行のデータ | 1. 第1行のチェックボックスをクリック（チェック ON）<br/>2. 即座に [編集] → [削除] ボタンをクリック | ・第1行のチェック状態が確定（ON）<br/>・削除ダイアログで「1行を削除します」と表示<br/>・チェック状態が反映されている | 即座確定（CurrentCellDirtyStateChanged）、リアルタイム反映 |

---

### 5.3 ステータスバー更新テスト

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-STATUS-01 | ステータスバーに総行数が表示されること | グリッドに3行のデータ表示 | 1. ステータスバーを視認 | ・ステータスバーに「全 3 件」と表示される | ステータスバー表示 |
| IT-STATUS-02 | 行追加後にステータスバーが更新 | グリッドに3行のデータ、ステータスバー「全 3 件」 | 1. [編集] → [新規追加] をクリック<br/>2. 定数情報を入力、[OK] をクリック | ・新規行がグリッドに追加される<br/>・ステータスバーが「全 4 件」に更新される | ステータスバー更新 |
| IT-STATUS-03 | 行削除後にステータスバーが更新 | グリッドに3行のデータ、第1行をチェック ON | 1. [編集] → [削除] をクリック<br/>2. 削除確認ダイアログで [はい] をクリック | ・第1行が削除される<br/>・ステータスバーが「全 2 件」に更新される | ステータスバー更新 |

---

## 6. ダイアログテスト

### 6.1 定数編集ダイアログ - 新規追加モード

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-DIALOG-01 | 新規追加ダイアログの表示確認 | アプリケーション起動 | 1. [編集] → [新規追加] をクリック | ・「定数新規追加」ダイアログが表示される<br/>・タイトル："定数新規追加"<br/>・全てのフィールドが空白<br/>・定数名(物理名)フィールドにフォーカスあり | ダイアログ表示、フォーカス制御 |
| IT-DIALOG-02 | 新規定数の追加処理 | 新規追加ダイアログが表示 | 1. 定数名(物理名)：`"NEW_TEMP"` を入力<br/>2. 日本語名(論理名)：`"新しい温度"` を入力<br/>3. 値：`"50"` を入力<br/>4. 単位：`"℃"` を入力<br/>5. 説明：`"テスト用定数"` を入力<br/>6. [OK] をクリック | ・ダイアログが閉じられる<br/>・グリッドに新しい行が追加される<br/>・各フィールドが正しく表示される<br/>・ステータスバーが更新される | データ入力、ダイアログ終了、グリッド更新 |
| IT-DIALOG-03 | 必須項目入力漏れエラー | 新規追加ダイアログが表示 | 1. 定数名(物理名)：`"NEW_TEMP"` を入力<br/>2. 日本語名(論理名)：空白<br/>3. 値：`"50"` を入力<br/>4. [OK] をクリック | ・エラーメッセージが表示される<br/>・メッセージ："日本語名(論理名)は必須です"<br/>・ダイアログは閉じられない | 入力検証、エラーメッセージ表示 |
| IT-DIALOG-04 | 定数名形式エラー | 新規追加ダイアログが表示 | 1. 定数名(物理名)：`"New-Temp"` を入力（ハイフンを含む）<br/>2. 日本語名(論理名)：`"新しい温度"` を入力<br/>3. 値：`"50"` を入力<br/>4. [OK] をクリック | ・エラーメッセージが表示される<br/>・メッセージ："E008: 定数名の形式が不正です（英大文字とアンダースコアのみ）"<br/>・ダイアログは閉じられない | 形式検証、エラーメッセージ表示 |

---

### 6.2 定数編集ダイアログ - 編集モード

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-DIALOG-05 | 編集ダイアログの表示確認 | グリッドに3行のデータ、第1行を選択 | 1. 第1行をクリック（選択状態）<br/>2. [編集] → [編集] をクリック | ・「定数編集」ダイアログが表示される<br/>・タイトル："定数編集"<br/>・定数名(物理名)フィールド：グレーアウト、値は表示（読み取り専用）<br/>・他のフィールド：第1行のデータが自動入力される<br/>・フォーカス：日本語名(論理名)フィールド | ダイアログ表示、フィールド自動入力、フォーカス制御 |
| IT-DIALOG-06 | 編集モードでの定数名読み取り専用確認 | 編集ダイアログが表示（編集モード） | 1. 定数名(物理名)フィールドをクリック | ・定数名(物理名)フィールドにフォーカスが移らない<br/>・キーボード入力が受け付けられない<br/>・フィールドがグレーアウト表示 | 読み取り専用制御 |
| IT-DIALOG-07 | 既存定数の更新処理 | 編集ダイアログが表示（編集モード）、第1行を編集 | 1. 日本語名(論理名)：`"更新されたエンジン温度"` に変更<br/>2. 値：`"130"` に変更<br/>3. [OK] をクリック | ・ダイアログが閉じられる<br/>・グリッドの第1行が更新される<br/>・定数名(物理名)は変更されない<br/>・新しい値が表示される | データ更新、グリッド反映 |

---

### 6.3 削除確認ダイアログ

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-DIALOG-08 | 削除確認ダイアログの表示 | グリッドに3行のデータ、第1行をチェック ON | 1. [編集] → [削除] をクリック | ・「削除確認」ダイアログが表示される<br/>・メッセージ："1行を削除します。よろしいですか？"<br/>・[はい]、[いいえ] ボタンが表示 | ダイアログ表示、メッセージ表示 |
| IT-DIALOG-09 | 削除確認で [はい] を選択 | 削除確認ダイアログが表示 | 1. [はい] をクリック | ・ダイアログが閉じられる<br/>・チェックされた行が削除される<br/>・ステータスバーが更新される | 削除処理 |
| IT-DIALOG-10 | 削除確認で [いいえ] を選択 | 削除確認ダイアログが表示 | 1. [いいえ] をクリック | ・ダイアログが閉じられる<br/>・行は削除されない<br/>・グリッドは変更されない | キャンセル処理 |

---

### 6.4 終了確認ダイアログ

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-DIALOG-11 | 終了確認で [はい(保存して終了)] を選択 | グリッドで新規定数を追加（未保存状態）、ウィンドウの「×」ボタンをクリック | 1. 「保存されていない変更があります」ダイアログが表示<br/>2. [はい(保存して終了)] をクリック | ・ファイル保存ダイアログが表示される<br/>・ファイルを保存後、アプリケーションが終了される | 終了確認、保存処理、アプリケーション終了 |
| IT-DIALOG-12 | 終了確認で [いいえ(保存せず終了)] を選択 | グリッドで新規定数を追加（未保存状態）、ウィンドウの「×」ボタンをクリック | 1. 「保存されていない変更があります」ダイアログが表示<br/>2. [いいえ(保存せず終了)] をクリック | ・変更が破棄される<br/>・ファイル保存ダイアログは表示されない<br/>・アプリケーションが終了される | キャンセル保存、アプリケーション終了 |
| IT-DIALOG-13 | 終了確認で [キャンセル] を選択 | グリッドで新規定数を追加（未保存状態）、ウィンドウの「×」ボタンをクリック | 1. 「保存されていない変更があります」ダイアログが表示<br/>2. [キャンセル] をクリック | ・ダイアログが閉じられる<br/>・アプリケーションは開いたまま<br/>・グリッドのデータは保持される | 終了キャンセル |

---

## 7. エラーハンドリング テスト

### 7.1 ファイル操作エラー

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-ERROR-01 | 読み込み権限がないファイルのエラー | [TD-IT-06] 読み取り権限がないCSVファイルが存在 | 1. [ファイル] → [読込] をクリック<br/>2. [TD-IT-06] 権限なしファイルを選択<br/>3. [開く] をクリック | ・エラーダイアログが表示される<br/>・メッセージ："E002: ファイルの読み込みに失敗しました"<br/>・グリッドは変更されない | エラーハンドリング |
| IT-ERROR-02 | ディスク容量不足エラー（シミュレーション） | ディスク容量が非常に少ない環境（またはテスト用に模擬） | 1. [ファイル] → [保存] をクリック<br/>2. ファイル名を入力、[保存] をクリック | ・エラーダイアログが表示される<br/>・メッセージ："E011: 保存に失敗しました（ディスク容量不足）"<br/>・アプリケーションは開いたまま | エラーハンドリング |

---

### 7.2 入力検証エラー

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-ERROR-03 | 定数名が最大文字数を超えた場合 | 新規追加ダイアログが表示 | 1. 定数名(物理名)：33文字の英大文字を入力<br/>2. [OK] をクリック | ・エラーメッセージが表示される<br/>・メッセージ："E009: 定数名の長さが上限を超えています（最大32文字）"<br/>・ダイアログは閉じられない | 入力検証 |
| IT-ERROR-04 | 日本語名(論理名)が空の場合 | 新規追加ダイアログが表示 | 1. 定数名(物理名)：`"TEST_CONST"` を入力<br/>2. 日本語名(論理名)：空白<br/>3. 値：`"100"` を入力<br/>4. [OK] をクリック | ・エラーメッセージが表示される<br/>・メッセージ："E006: 日本語名(論理名)が空です"<br/>・ダイアログは閉じられない | 必須項目チェック |

---

## 8. シナリオテスト（ユースケース）

### 8.1～8.4 ユースケース別テスト

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-SCENARIO-01 | UC-001: 定数修正・エクスポート | [TD-IT-01] アプリケーション起動 | **ステップ1**: [ファイル] → [読込] で [TD-IT-01] と [TD-IT-02] を読込（マージモード）<br/>**ステップ2**: グリッドで修正対象行をチェック<br/>**ステップ3**: [編集] → [編集] で編集ダイアログを表示<br/>**ステップ4**: 値や説明を修正し [OK] をクリック<br/>**ステップ5**: 複数行をチェック選択<br/>**ステップ6**: [ファイル] → [CSVエクスポート] をクリック<br/>**ステップ7**: ファイル名を入力し [保存] をクリック | ・各ステップで正常に処理が進行<br/>・修正したデータがグリッドに反映<br/>・チェック選択行のみがCSVに出力<br/>・保存完了メッセージが表示 | 一連の操作フロー、データ更新、ファイル出力 |
| IT-SCENARIO-02 | UC-002: 新規定数追加 | [TD-IT-01] アプリケーション起動、CSVファイル読込済み（3行） | **ステップ1**: [編集] → [新規追加] をクリック<br/>**ステップ2**: 定数名(物理名)：`"NEW_SENSOR"` を入力<br/>**ステップ3**: 日本語名(論理名)：`"新規センサー"` を入力<br/>**ステップ4**: 値：`"25.5"` を入力<br/>**ステップ5**: 単位：`"V"` を入力<br/>**ステップ6**: 説明：`"新規センサーの基準電圧"` を入力<br/>**ステップ7**: [OK] をクリック<br/>**ステップ8**: [ファイル] → [保存] をクリック<br/>**ステップ9**: ファイル名を入力し [保存] をクリック | ・新規行がグリッドの最後に追加<br/>・ステータスバー："全 4 件" に更新<br/>・ファイルが保存される<br/>・保存完了メッセージが表示 | 新規追加、グリッド更新、ファイル保存 |
| IT-SCENARIO-03 | UC-004: 定数削除 | [TD-IT-01] アプリケーション起動、CSVファイル読込済み（5行） | **ステップ1**: グリッド第2行のチェックボックスをクリック（チェック ON）<br/>**ステップ2**: グリッド第4行のチェックボックスをクリック（チェック ON）<br/>**ステップ3**: [編集] → [削除] をクリック<br/>**ステップ4**: 削除確認ダイアログで [はい] をクリック<br/>**ステップ5**: [ファイル] → [保存] をクリック<br/>**ステップ6**: ファイル名を入力し [保存] をクリック | ・チェックされた2行の背景色が黄色に変わる<br/>・削除確認ダイアログで行数が表示<br/>・2行が削除される<br/>・ステータスバー："全 3 件" に更新<br/>・ファイルが保存される | 複数行選択、削除処理、ファイル保存 |
| IT-SCENARIO-04 | UC-005: 未保存変更での終了確認 | アプリケーション起動、CSVファイル読込済み | **ステップ1**: [編集] → [新規追加] をクリック<br/>**ステップ2**: 定数情報を入力<br/>**ステップ3**: [OK] をクリック<br/>**ステップ4**: ウィンドウの「×」ボタンをクリック<br/>**ステップ5**: 終了確認ダイアログで [はい(保存して終了)] をクリック<br/>**ステップ6**: ファイル保存ダイアログが表示、ファイル名を入力<br/>**ステップ7**: [保存] をクリック | ・新規行がグリッドに追加<br/>・終了確認ダイアログが表示<br/>・ファイル保存ダイアログが表示<br/>・ファイルが保存される<br/>・アプリケーションが終了 | 終了確認フロー、ファイル保存、アプリケーション終了 |

---

## 9. パフォーマンステスト

| テストID | テスト名 | 前提条件 | 操作手順 | 期待される動作 | 検証項目 |
|---------|---------|---------|---------|-------------|--------|
| IT-PERF-01 | 大規模ファイル（1000行）の読込 | [TD-IT-05] 1000行のデータを含むCSVファイルが存在 | 1. [ファイル] → [読込] をクリック<br/>2. [TD-IT-05] 1000行CSVファイルを選択<br/>3. [開く] をクリック<br/>4. 読込完了時刻を記録 | ・ファイルが読み込まれる<br/>・グリッドに1000行が表示される<br/>・読込時間：1秒以内（目標値）<br/>・UIのフリーズなし | 処理速度、UI応答性 |
| IT-PERF-02 | 大規模グリッド（1000行）のスクロール | [TD-IT-05] グリッドに1000行のデータ表示 | 1. [TD-IT-05] で1000行読込後、グリッドの最上部から最下部へスクロール<br/>2. スクロール速度と表示遅延を確認 | ・スクロールが滑らか<br/>・表示遅延なし<br/>・チェックボックスが正常に機能 | UI応答性 |

---

## 10. テストデータ定義

以下の表は、結合テストに必要なテストデータ（CSVファイル）の定義です。各テストデータは、対応するテストケースに参照されます。

### 10.1 テストデータ一覧

| データID | ファイル名 | 説明 | 内容・条件 | 関連するテストID |
|:---|:---|:---|:---|:---|
| **TD-IT-01** | `it_valid_initial.csv` | 初期表示用 | アプリ起動確認用。標準的なデータ5行程度（ENGINE_TEMP, SPEED_LIMIT, BATTERY_VOLTAGE, SENSOR_RANGE, ALARM_THRESHOLD） | IT-FILE-02, IT-GRID-01～03 |
| **TD-IT-02** | `it_merge_new.csv` | マージ読込用 | TD-IT-01 に対して、一部更新・一部新規のデータ3行（ENGINE_TEMP 更新、NEW_SENSOR 新規追加、EXTRA_PARAM 新規追加） | IT-FILE-02, IT-SCENARIO-01 |
| **TD-IT-03** | `it_replace_full.csv` | 置換読込用 | TD-IT-01 と全く異なるデータセット3行（PARAM_A, PARAM_B, PARAM_C） | IT-FILE-03 |
| **TD-IT-04** | `it_error_header.csv` | エラー確認用 | ヘッダー行が不正（必須カラム PhysicalName が欠落、または列名が異なる） | IT-FILE-04 |
| **TD-IT-05** | `it_perf_1000.csv` | 性能検証用 | 1000行の有効なデータ。物理名は連番（ITEM_0001 ～ ITEM_1000）、論理名は「パラメータ0001」～「パラメータ1000」 | IT-PERF-01, IT-PERF-02 |
| **TD-IT-06** | `it_readonly.csv` | 権限エラー用 | ファイルのプロパティで「読み取り専用」属性を付与したもの。内容は TD-IT-01 と同等 | IT-ERROR-01 |

---

## 11. 改版履歴

| 版番 | 作成日 | 変更内容 |
|------|--------|---------|
| 1.0 | 2026-01-21 | 初版作成：全テスト項目を統合。**新規**: 第2章「結合テスト方針と網羅性」を追加し、結合テストのポリシー（業務フロー中心、UI層網羅、異常系検証）と、全テストシナリオについて表形式で網羅状況を記載。テストカバレッジ100%（41テストケース）を達成。顧客向けレビュー準備完了。**構成変更**: 従来のテスト対象がセクション2から3に移動し、UI操作フローテストがセクション4に繰り上げ |
| 1.1 | 2026-01-21 | **新規**: 第10章「テストデータ定義」を追加。結合テストに必要なテストデータ（CSVファイル）を表形式で定義。正常系・異常系・パフォーマンステスト用のテストデータを6種類定義し、各テストケースとの対応関係を明記。テストデータ管理の透明性とメンテナンス性を向上。**構成変更**: 従来の第10章「改版履歴」を第11章に繰り上げ |
